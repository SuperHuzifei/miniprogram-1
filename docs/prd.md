# 微信小程序预约系统原型设计需求文档

## 一、项目背景

本项目是一个房间预约系统，基于微信小程序实现。用户无需注册，只需使用微信身份识别（openid）及手机号即可完成预约流程。预约时段为每天 10:00 到 22:00，每 2 小时为一个预约段。

---

## 二、平台要求

- 平台：微信小程序  
- 框架：使用原生微信小程序（支持 Tailwind CSS 或 Bootstrap）  
- 设计风格：TDesign（腾讯 Design System 风格）  
- 支持云开发（数据库 + 云函数）  
- 无需账号注册，仅使用 openid 识别  

---

## 三、页面导航结构

页面底部为 TabBar，有三个主按钮，分别进入以下页面：

1. `首页`（home.html）  
2. `预约`（appointment.html）  
3. `我的预约`（profile.html）  

---

## 四、页面功能详解

### ✅ 1. 首页页面（home.html）

- 页面顶部显示酒店 Logo  
- 展示轮播图组件，包含酒店图片或介绍（示意图）  
- 无其他交互，仅作为欢迎展示页  

---

### ✅ 2. 预约页面（appointment.html）

#### 2.1 月历视图（Calendar）

- 显示当前月份（可左右切换月）  
- 每天为一个按钮方格，排列为一周一行  
- 状态区分：  
  - **蓝色按钮**：当天尚未预约  
  - **灰色按钮**：当天已满约  
- 点击某天后，进入“时间段选择区域”  

#### 2.2 时间段选择区域

- 固定显示以下 6 个时间段，每段 2 小时：  
  - 10:00-12:00  
  - 12:00-14:00  
  - 14:00-16:00  
  - 16:00-18:00  
  - 18:00-20:00  
  - 20:00-22:00  
- 按钮状态样式：  
  - **蓝色按钮**：可预约时间段  
  - **灰色按钮**：已被其他用户预约（不可选）  
- 用户点击后，选中状态高亮，仅可选一个时间段  

#### 2.3 手机号输入 + 提交按钮

- 手机号输入框，限制 11 位，需校验手机号格式  
- 按钮：`提交预约`  
  - 校验输入手机号是否符合格式  
  - 校验是否选中时间段  
  - 发送预约请求（调用云函数）  
  - 请求成功后：  
    - 弹窗提示“预约成功”  
    - 刷新当前日期的预约信息（重新加载预约状态）  

---

### ✅ 3. 我的预约页面（profile.html）

- 展示当前用户所有预约记录（从数据库中获取 openid 关联记录）  
- 每条预约信息显示：  
  - 日期  
  - 时间段  
  - 手机号（如有）  
- 每条记录右侧可添加一个“取消预约”按钮：  
  - 点击后调用云函数删除数据库记录  
  - 刷新列表数据  
  - 并同步更新日历预约状态  

---

## 五、数据库设计（appointments 表）

字段结构如下：

```json
{
  "openid": "用户微信 OpenID",
  "date": "2025-05-12",
  "time": "10:00-12:00",
  "phone": "用户手机号",
  "createTime": "时间戳"
}
